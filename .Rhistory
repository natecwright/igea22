Q = 100
t = c(1,2,3,4,5,6,7,8,9,10)
# i = seq(100,1000, by=100)
C1 = (delt-2*K*X)/(2*K*(1-X)+delt)
C2 = (delt+2*K*X)/(2*K*(1-X)+delt)
C3 = (2*K*(1-X)-delt)/(2*K*(1-X)+delt)
Q = matrix(100, nrow=10, ncol=10)
Q[,1]= I
for (i in 1:9) {
for (j in 1:9) {
Q[i+1,j+1]=C1[i]*Q[i,j+1]+C2[i]*Q[i,j]+C3[i]*Q[i+1,j]
}
}
Q
X = c(.1,.2,.1,.4,.5,.1,.1,.1,.2,.1) #weighing coefficient
d = c(1,4,4,7,6,7,7,14,15,20) #m
K = 100/sqrt(9.81*d) #
I = c(100,120,140,150,150,160,130,120,110,100) #m3/s
delt = 1 #day
Q = 100
t = c(1,2,3,4,5,6,7,8,9,10)
# i = seq(100,1000, by=100)
C1 = (delt-2*K*X)/(2*K*(1-X)+delt)
C2 = (delt+2*K*X)/(2*K*(1-X)+delt)
C3 = (2*K*(1-X)-delt)/(2*K*(1-X)+delt)
Q = matrix(100, nrow=10, ncol=10)
Q[,1]= I
for (i in 1:9) {
for (j in 1:9) {
Q[i+1,j+1]=C1[i]*Q[i,j+1]+C2[i]*Q[i,j]+C3[i]*Q[i+1,j]
}
}
Q
source("~/Documents/senior_year/hydrology/HW6_3.R", echo=TRUE)
Q
plot(Q)[,1]
plot(1:10,Q[,1])
plot(1:10,Q[,1])
lines(1:10,Q[,2])
plot(1:10,Q[,1],type="l")
lines(1:10,Q[,2])
plot(1:10,Q[,1],type="l", col="red")
lines(1:10,Q[,2])
plot(1:10,Q[,3],type="l", col="red")
lines(1:10,Q[,4])
plot(1:10,Q[,1],type="l", col="red")
lines(1:10,Q[,2])
plot(1:10,Q[,5],type="l", col="red")
lines(1:10,Q[,6])
plot(1:10,Q[,9],type="l", col="red")
lines(1:10,Q[,10])
plot(1:10,Q[,7],type="l", col="red")
lines(1:10,Q[,8])
plot(1:10,Q[,9],type="l", col="red")
lines(1:10,Q[,10])
plot(1:10,Q[,7],type="l", col="red")
lines(1:10,Q[,8])
plot(1:10,Q[,9],type="l", col="red")
lines(1:10,Q[,10])
plot(1:10,Q[,7],type="l", col="red")
lines(1:10,Q[,8])
source("~/Documents/senior_year/hydrology/HW6.R", echo=TRUE)
p1
source("~/Documents/senior_year/hydrology/HW6_3.R", echo=TRUE)
Q
C1
C2
C3
source("~/Documents/senior_year/hydrology/HW6_3.R", echo=TRUE)
Q
source("~/Documents/senior_year/hydrology/HW6.R", echo=TRUE)
p1
source("~/Documents/senior_year/hydrology/HW6.R", echo=TRUE)
p1
source("~/Documents/senior_year/hydrology/HW6.R", echo=TRUE)
p1
source("~/Documents/senior_year/hydrology/HW6.R", echo=TRUE)
p1
source("~/Documents/senior_year/hydrology/HW6.R", echo=TRUE)
p1
source("~/Documents/senior_year/hydrology/HW6.R", echo=TRUE)
p1
source("~/Documents/senior_year/hydrology/HW6.R", echo=TRUE)
p1
source("~/Documents/senior_year/hydrology/HW6.R", echo=TRUE)
p1
source("~/Documents/senior_year/hydrology/HW6.R", echo=TRUE)
source("~/Documents/GitHub/igea22/ts_scripts/load_3.R", echo=TRUE)
View(master_df)
# script to read in basic data and look at it
library(dplyr)
library(readxl)
library(tidyr)
library(stringr)
# setwd (path to the data)
setwd('/Users/emmaboudreau/Documents/GitHub/igea22/')
g3_files=list.files('raw_ts_data/group3.n')
input_file="3tp11_ts1.txt"
#read_function = function(input_file) {
reach_ID = toupper(strsplit(input_file, "_")[[1]][1])
# read in data ----------
#read in total station excel
ts1_excel = read_xlsx('raw_ts_data/fd/fd3_ts1.xlsx')%>%
mutate(TS_code  = "1")#%>%
#filter(is.na(ERRORCODE))
ts2_excel = read_xlsx('raw_ts_data/fd/fd3_ts2.xlsx')%>%
mutate(TS_code  = "2")#%>%
#filter(is.na(ERRORCODE))
# names(ts1_excel) = make.names(names(ts1_excel), unique = TRUE)
# names(ts2_excel) = make.names(names(ts2_excel), unique = TRUE)
#read in metadata
metadata_excel = read_xlsx('raw_ts_data/fd/fd3_metadata.xlsx')%>%
filter(is.na(Filter))
#read in reach code
ts1_reach = read.delim(paste0('raw_ts_data/group3.n/',reach_ID,'_ts1.txt'),
header = FALSE, nrows= 1, dec = ".", sep = '\t')%>%
transmute(Reach = V1)
ts2_reach = read.delim(paste0('raw_ts_data/group3.n/',reach_ID,'_ts2.txt'),
header = FALSE, nrows= 1, dec = ".", sep = '\t')%>%
transmute(Reach = V1)
input1_file=paste0('raw_ts_data/group3/',reach_ID,'_ts1.txt')
raw1_text=readLines(con=input1_file) #read every line
index1_1=grep("END SETUP",raw1_text) #ts1 start of section
index1_2=grep("END SLOPE",raw1_text) #ts1 end of section
ts1_hr_df= read.delim(input1_file,
header = TRUE, skip = index1_1, nrows= (index1_2-index1_1-2), dec = ".", sep = ',')%>%
rename("PointID"="TgtID")%>%
rename("HR"="RefHt")%>%
filter(PointID!=101)
input2_file=paste0('raw_ts_data/group3/',reach_ID,'_ts2.txt')
raw2_text=readLines(con=input2_file) #read every line
index2_1=grep("END SETUP",raw2_text) #ts2 start of section
index2_2=grep("END SLOPE",raw2_text) #ts2 end of section
ts2_hr_df= read.delim(input2_file,
header = TRUE, skip = index2_1, nrows= (index2_2-index2_1-2), dec = ".", sep = ',')%>%
rename("PointID"="TgtID")%>%
rename("HR"="RefHt")%>%
filter(PointID!=101)
View(ts2_hr_df)
#read in total station txt files
ts1_txt = read.delim(paste0('raw_ts_data/group3.n/',reach_ID,'_ts1.txt'),
skip = 1, header = TRUE, dec = ".", sep = ',')%>%
mutate(TS_code = "1")%>%
mutate(Reach=ts1_reach$Reach)%>%
mutate(PointID=as.double(PointID))%>%
filter(!PointID==101)%>%
mutate(HR=ts1_hr_df$HR)
ts2_txt = read.delim(paste0('raw_ts_data/group3.n/',reach_ID,'_ts2.txt'),
skip = 1, header = TRUE, dec = ".", sep = ',')%>%
mutate(TS_code = "2")%>%
mutate(Reach=ts2_reach$Reach)%>%
mutate(PointID=as.double(PointID))%>%
filter(!PointID==101)%>%
mutate(HR=ts2_hr_df$HR)
View(ts1_txt)
View(ts2_txt)
print(toupper(reach_ID))
#row bind excel files for ts1 and ts2
joined_df1 = rbind(ts1_excel,ts2_excel)%>%
filter(Reach==reach_ID)%>%
filter(!is.na(XSection)) #remove PT 101
#row bind txt files for ts1 and ts2
joined_df2 = rbind(ts1_txt,ts2_txt)
View(joined_df2)
master_df = left_join(joined_df1, joined_df2, by=c('Reach', 'TS_code', 'PointID'))%>%
mutate(uniqueID = paste(Reach,TS_code,Location,XSection))%>%
mutate(AP = substr(uniqueID,10,10))%>%
mutate(LWR = substr(uniqueID,9,9))%>%
mutate(number = substr(uniqueID,11,11))%>%
mutate(UID2 = paste0(Reach,TS_code,LWR,number,XSection))%>%
mutate(Elevation = as.double(str_remove_all(Elevation, ' ')))%>%
filter(PointID!=101)%>%
mutate(newheight=ifelse(ERRORCODE==2,Elevation + (HR-ADJUSTMENT),Elevation))
View(master_df)
master_df = left_join(joined_df1, joined_df2, by=c('Reach', 'TS_code', 'PointID'))%>%
mutate(uniqueID = paste(Reach,TS_code,Location,XSection))%>%
mutate(AP = substr(uniqueID,10,10))%>%
mutate(LWR = substr(uniqueID,9,9))%>%
mutate(number = substr(uniqueID,11,11))%>%
mutate(UID2 = paste0(Reach,TS_code,LWR,number,XSection))%>%
mutate(Elevation = as.double(str_remove_all(Elevation, ' ')))%>%
filter(PointID!=101)%>%
mutate(newheight=ifelse(ERRORCODE==2,Elevation + (HR-ADJUSTMENT),Elevation))%>% #else statement not working
# if (ERRORCODE==is.na){
#   newheight==Elevation
# }
filter(ERRORCODE!="8")   #being problematic and removin all of TS1
master_df = left_join(joined_df1, joined_df2, by=c('Reach', 'TS_code', 'PointID'))%>%
mutate(uniqueID = paste(Reach,TS_code,Location,XSection))%>%
mutate(AP = substr(uniqueID,10,10))%>%
mutate(LWR = substr(uniqueID,9,9))%>%
mutate(number = substr(uniqueID,11,11))%>%
mutate(UID2 = paste0(Reach,TS_code,LWR,number,XSection))%>%
mutate(Elevation = as.double(str_remove_all(Elevation, ' ')))%>%
filter(PointID!=101)%>%
mutate(newheight=ifelse(ERRORCODE==2,Elevation + (HR-ADJUSTMENT),Elevation))
master_df = left_join(joined_df1, joined_df2, by=c('Reach', 'TS_code', 'PointID'))%>%
mutate(uniqueID = paste(Reach,TS_code,Location,XSection))%>%
mutate(AP = substr(uniqueID,10,10))%>%
mutate(LWR = substr(uniqueID,9,9))%>%
mutate(number = substr(uniqueID,11,11))%>%
mutate(UID2 = paste0(Reach,TS_code,LWR,number,XSection))%>%
mutate(Elevation = as.double(str_remove_all(Elevation, ' ')))%>%
filter(PointID!=101)%>%
mutate(newheight=ifelse(ERRORCODE==2,Elevation + (HR-ADJUSTMENT),Elevation))%>% #else statement not working
# if (ERRORCODE==is.na){
#   newheight==Elevation
# }
filter(ERRORCODE!="8")
source("~/Documents/GitHub/igea22/ts_scripts/load_3.R", echo=TRUE)
source("~/Documents/GitHub/igea22/ts_scripts/load_3.R", echo=TRUE)
master_df = left_join(joined_df1, joined_df2, by=c('Reach', 'TS_code', 'PointID'))%>%
mutate(uniqueID = paste(Reach,TS_code,Location,XSection))%>%
mutate(AP = substr(uniqueID,10,10))%>%
mutate(LWR = substr(uniqueID,9,9))%>%
mutate(number = substr(uniqueID,11,11))%>%
mutate(UID2 = paste0(Reach,TS_code,LWR,number,XSection))%>%
mutate(Elevation = as.double(str_remove_all(Elevation, ' ')))%>%
filter(PointID!=101)%>%
mutate(newheight=ifelse(ERRORCODE==2,Elevation + (HR-ADJUSTMENT),Elevation))%>% #else statement not working
# if (ERRORCODE==is.na){
#   newheight==Elevation
# }
mutate(is.na(ERRORCODE)=0))%>%
master_df = left_join(joined_df1, joined_df2, by=c('Reach', 'TS_code', 'PointID'))%>%
mutate(uniqueID = paste(Reach,TS_code,Location,XSection))%>%
mutate(AP = substr(uniqueID,10,10))%>%
mutate(LWR = substr(uniqueID,9,9))%>%
mutate(number = substr(uniqueID,11,11))%>%
mutate(UID2 = paste0(Reach,TS_code,LWR,number,XSection))%>%
mutate(Elevation = as.double(str_remove_all(Elevation, ' ')))%>%
filter(PointID!=101)%>%
mutate(newheight=ifelse(ERRORCODE==2,Elevation + (HR-ADJUSTMENT),Elevation))%>% #else statement not working
# if (ERRORCODE==is.na){
#   newheight==Elevation
# }
mutate(ERRORCODE[is.na(ERRORCODE)]=0)%>%
#row bind excel files for ts1 and ts2
joined_df1 = rbind(ts1_excel,ts2_excel)%>%
filter(Reach==reach_ID)%>%
filter(!is.na(XSection)) #remove PT 101%>%
mutate(ERRORCODE=ifelse(is.na(ERRORCODE),0,ERRORCODE))
#row bind excel files for ts1 and ts2
joined_df1 = rbind(ts1_excel,ts2_excel)%>%
filter(Reach==reach_ID)%>%
filter(!is.na(XSection)) %>%#remove PT 101%>%
mutate(ERRORCODE=ifelse(is.na(ERRORCODE),0,ERRORCODE))
View(joined_df1)
master_df = left_join(joined_df1, joined_df2, by=c('Reach', 'TS_code', 'PointID'))%>%
mutate(uniqueID = paste(Reach,TS_code,Location,XSection))%>%
mutate(AP = substr(uniqueID,10,10))%>%
mutate(LWR = substr(uniqueID,9,9))%>%
mutate(number = substr(uniqueID,11,11))%>%
mutate(UID2 = paste0(Reach,TS_code,LWR,number,XSection))%>%
mutate(Elevation = as.double(str_remove_all(Elevation, ' ')))%>%
filter(PointID!=101)%>%
mutate(newheight=ifelse(ERRORCODE==2,Elevation + (HR-ADJUSTMENT),Elevation))%>% #else statement not working
# if (ERRORCODE==is.na){
#   newheight==Elevation
# }
filter(ERRORCODE!="8")   #being problematic and removin all of TS1
source("~/Documents/GitHub/igea22/ts_scripts/load_3.R", echo=TRUE)
# script to read in basic data and look at it
library(dplyr)
library(readxl)
library(tidyr)
library(stringr)
# setwd (path to the data)
setwd('/Users/emmaboudreau/Documents/GitHub/igea22/')
g3_files=list.files('raw_ts_data/group3.n')
input_file="3tp11_ts1.txt"
#read_function = function(input_file) {
reach_ID = toupper(strsplit(input_file, "_")[[1]][1])
# read in data ----------
#read in total station excel
ts1_excel = read_xlsx('raw_ts_data/fd/fd3_ts1.xlsx')%>%
mutate(TS_code  = "1")#%>%
#filter(is.na(ERRORCODE))
ts2_excel = read_xlsx('raw_ts_data/fd/fd3_ts2.xlsx')%>%
mutate(TS_code  = "2")#%>%
#filter(is.na(ERRORCODE))
#read in metadata
metadata_excel = read_xlsx('raw_ts_data/fd/fd3_metadata.xlsx')%>%
filter(is.na(Filter))
#read in reach code
ts1_reach = read.delim(paste0('raw_ts_data/group3.n/',reach_ID,'_ts1.txt'),
header = FALSE, nrows= 1, dec = ".", sep = '\t')%>%
transmute(Reach = V1)
ts2_reach = read.delim(paste0('raw_ts_data/group3.n/',reach_ID,'_ts2.txt'),
header = FALSE, nrows= 1, dec = ".", sep = '\t')%>%
transmute(Reach = V1)
input1_file=paste0('raw_ts_data/group3/',reach_ID,'_ts1.txt')
raw1_text=readLines(con=input1_file) #read every line
index1_1=grep("END SETUP",raw1_text) #ts1 start of section
index1_2=grep("END SLOPE",raw1_text) #ts1 end of section
ts1_hr_df= read.delim(input1_file,
header = TRUE, skip = index1_1, nrows= (index1_2-index1_1-2), dec = ".", sep = ',')%>%
rename("PointID"="TgtID")%>%
rename("HR"="RefHt")%>%
filter(PointID!=101)
input2_file=paste0('raw_ts_data/group3/',reach_ID,'_ts2.txt')
raw2_text=readLines(con=input2_file) #read every line
index2_1=grep("END SETUP",raw2_text) #ts2 start of section
index2_2=grep("END SLOPE",raw2_text) #ts2 end of section
ts2_hr_df= read.delim(input2_file,
header = TRUE, skip = index2_1, nrows= (index2_2-index2_1-2), dec = ".", sep = ',')%>%
rename("PointID"="TgtID")%>%
rename("HR"="RefHt")%>%
filter(PointID!=101)
#read in total station txt files
ts1_txt = read.delim(paste0('raw_ts_data/group3.n/',reach_ID,'_ts1.txt'),
skip = 1, header = TRUE, dec = ".", sep = ',')%>%
mutate(TS_code = "1")%>%
mutate(Reach=ts1_reach$Reach)%>%
mutate(PointID=as.double(PointID))%>%
filter(!PointID==101)%>%
mutate(HR=ts1_hr_df$HR)
ts2_txt = read.delim(paste0('raw_ts_data/group3.n/',reach_ID,'_ts2.txt'),
skip = 1, header = TRUE, dec = ".", sep = ',')%>%
mutate(TS_code = "2")%>%
mutate(Reach=ts2_reach$Reach)%>%
mutate(PointID=as.double(PointID))%>%
filter(!PointID==101)%>%
mutate(HR=ts2_hr_df$HR)
print(toupper(reach_ID))
#row bind excel files for ts1 and ts2
joined_df1 = rbind(ts1_excel,ts2_excel)%>%
filter(Reach==reach_ID)%>%
filter(!is.na(XSection)) %>%#remove PT 101%>%
mutate(ERRORCODE=ifelse(is.na(ERRORCODE),0,ERRORCODE))
#row bind txt files for ts1 and ts2
joined_df2 = rbind(ts1_txt,ts2_txt)
created data frame with excel and text file for specific reach
master_df = left_join(joined_df1, joined_df2, by=c('Reach', 'TS_code', 'PointID'))%>%
mutate(uniqueID = paste(Reach,TS_code,Location,XSection))%>%
mutate(AP = substr(uniqueID,10,10))%>%
mutate(LWR = substr(uniqueID,9,9))%>%
mutate(number = substr(uniqueID,11,11))%>%
mutate(UID2 = paste0(Reach,TS_code,LWR,number,XSection))%>%
mutate(Elevation = as.double(str_remove_all(Elevation, ' ')))%>%
filter(PointID!=101)
master_df = left_join(joined_df1, joined_df2, by=c('Reach', 'TS_code', 'PointID'))%>%
mutate(uniqueID = paste(Reach,TS_code,Location,XSection))%>%
mutate(AP = substr(uniqueID,10,10))%>%
mutate(LWR = substr(uniqueID,9,9))%>%
mutate(number = substr(uniqueID,11,11))%>%
mutate(UID2 = paste0(Reach,TS_code,LWR,number,XSection))%>%
mutate(Elevation = as.double(str_remove_all(Elevation, ' ')))%>%
filter(PointID!=101)%>%
mutate(newelev=ifelse(ERRORCODE==2,Elevation + (HR-ADJUSTMENT),Elevation))
master_df = left_join(joined_df1, joined_df2, by=c('Reach', 'TS_code', 'PointID'))%>%
mutate(uniqueID = paste(Reach,TS_code,Location,XSection))%>%
mutate(AP = substr(uniqueID,10,10))%>%
mutate(LWR = substr(uniqueID,9,9))%>%
mutate(number = substr(uniqueID,11,11))%>%
mutate(UID2 = paste0(Reach,TS_code,LWR,number,XSection))%>%
mutate(Elevation = as.double(str_remove_all(Elevation, ' ')))%>%
filter(PointID!=101)%>%
mutate(newelev=ifelse(ERRORCODE==2,Elevation + (HR-ADJUSTMENT),Elevation))%>% #adjustment for HR change if errorcode is 2
filter(ERRORCODE!="8")
a_df = select(master_df, UID2, AP, LWR, newelev)%>%
filter(AP =='A')%>%
rename("Active" = "AP")%>%
rename("ElevationA" = "Elevation")
View(master_df)
a_df = select(master_df, UID2, AP, LWR, newelev)
a_df = select(master_df, UID2, AP, LWR, newelev)%>%
filter(AP =='A'
a_df = select(master_df, UID2, AP, LWR, newelev)%>%
a_df = select(master_df, UID2, AP, LWR, newelev)%>%
filter(AP =='A')
a_df = select(master_df, UID2, AP, LWR, newelev)%>%
filter(AP =='A')%>%
rename("Active" = "AP")
a_df = select(master_df, UID2, AP, LWR, newelev)%>%
filter(AP =='A')%>%
rename("Active" = "AP")%>%
rename("ElevationA" = "newelev")
p_df = select(master_df, UID2, AP, LWR, newelev)%>%
filter(AP =='P')%>%
rename("Permafrost" = "AP")%>%
rename("ElevationP" = "newelev")
#joins active layer df and permafrost df and creates a new column with elevation difference
alt_df = left_join(a_df, p_df, by=c('UID2','LWR'))%>%
mutate(ALT = (ElevationA-ElevationP))
source("~/Documents/GitHub/igea22/ts_scripts/load_3.R", echo=TRUE)
source("~/Documents/GitHub/igea22/ts_scripts/load_3.R", echo=TRUE)
#row bind excel files for ts1 and ts2
joined_df1 = rbind(ts1_excel,ts2_excel)%>%
filter(Reach==reach_ID)%>%
filter(!is.na(XSection)) %>% #remove PT 101
mutate(ERRORCODE=ifelse(is.na(ERRORCODE),0,ERRORCODE))
source("~/Documents/GitHub/igea22/ts_scripts/load_3.R", echo=TRUE)
# script to read in basic data and look at it
library(dplyr)
library(readxl)
library(tidyr)
library(stringr)
# setwd (path to the data)
setwd('/Users/emmaboudreau/Documents/GitHub/igea22/')
#g3_files=list.files('raw_ts_data/group3.n')
input_file="3ep01_ts1.txt"
#read_function = function(input_file) {
reach_ID = toupper(strsplit(input_file, "_")[[1]][1])
# read in data ----------
#read in total station excel
ts1_excel = read_xlsx('raw_ts_data/fd/fd3_ts1.xlsx')%>%
mutate(TS_code  = "1")#%>%
#filter(is.na(ERRORCODE))
ts2_excel = read_xlsx('raw_ts_data/fd/fd3_ts2.xlsx')%>%
mutate(TS_code  = "2")#%>%
#filter(is.na(ERRORCODE))
# names(ts1_excel) = make.names(names(ts1_excel), unique = TRUE)
# names(ts2_excel) = make.names(names(ts2_excel), unique = TRUE)
#read in metadata
metadata_excel = read_xlsx('raw_ts_data/fd/fd3_metadata.xlsx')%>%
filter(is.na(Filter))
#read in reach code
ts1_reach = read.delim(paste0('raw_ts_data/group3.n/',reach_ID,'_ts1.txt'),
header = FALSE, nrows= 1, dec = ".", sep = '\t')%>%
transmute(Reach = V1)
ts2_reach = read.delim(paste0('raw_ts_data/group3.n/',reach_ID,'_ts2.txt'),
header = FALSE, nrows= 1, dec = ".", sep = '\t')%>%
transmute(Reach = V1)
input1_file=paste0('raw_ts_data/group3/',reach_ID,'_ts1.txt')
raw1_text=readLines(con=input1_file) #read every line
index1_1=grep("END SETUP",raw1_text) #ts1 start of section
index1_2=grep("END SLOPE",raw1_text) #ts1 end of section
print(index1_1)
print(index1_2)
ts1_hr_df= read.delim(input1_file,
header = TRUE, skip = index1_1, nrows= (index1_2-index1_1-2), dec = ".", sep = ',')%>%
rename("PointID"="TgtID")%>%
rename("HR"="RefHt")%>%
filter(PointID!=101)
input2_file=paste0('raw_ts_data/group3/',reach_ID,'_ts2.txt')
raw2_text=readLines(con=input2_file) #read every line
index2_1=grep("END SETUP",raw2_text) #ts2 start of section
index2_2=grep("END SLOPE",raw2_text) #ts2 end of section
print(index2_1)
print(index2_2)
ts2_hr_df= read.delim(input2_file,
header = TRUE, skip = index2_1, nrows= (index2_2-index2_1-2), dec = ".", sep = ',')%>%
rename("PointID"="TgtID")%>%
rename("HR"="RefHt")%>%
filter(PointID!=101)
ts1_hr_df= read.delim(input1_file,
header = TRUE, skip = index1_1, nrows= (index1_2-index1_1-2), dec = ".", sep = ',')%>%
rename("PointID"="TgtID")%>%
rename("HR"="RefHt")%>%
filter(PointID!=101)
View(ts1_hr_df)
print(index1_1)
print(index1_2)
print(index2_1)
print(index2_2)
skip=index1_2-index1_1-2
print(skip)
# script to read in basic data and look at it
library(dplyr)
library(readxl)
library(tidyr)
library(stringr)
# setwd (path to the data)
setwd('/Users/emmaboudreau/Documents/GitHub/igea22/')
#g3_files=list.files('raw_ts_data/group3.n')
input_file="3ep07_ts1.txt"
reach_ID = toupper(strsplit(input_file, "_")[[1]][1])
# read in data ----------
#read in total station excel
ts1_excel = read_xlsx('raw_ts_data/fd/fd3_ts1.xlsx')%>%
mutate(TS_code  = "1")#%>%
#filter(is.na(ERRORCODE))
ts2_excel = read_xlsx('raw_ts_data/fd/fd3_ts2.xlsx')%>%
mutate(TS_code  = "2")#%>%
metadata_excel = read_xlsx('raw_ts_data/fd/fd3_metadata.xlsx')%>%
filter(is.na(Filter))
#read in reach code
ts1_reach = read.delim(paste0('raw_ts_data/group3.n/',reach_ID,'_ts1.txt'),
header = FALSE, nrows= 1, dec = ".", sep = '\t')%>%
transmute(Reach = V1)
ts2_reach = read.delim(paste0('raw_ts_data/group3.n/',reach_ID,'_ts2.txt'),
header = FALSE, nrows= 1, dec = ".", sep = '\t')%>%
transmute(Reach = V1)
input1_file=paste0('raw_ts_data/group3/',reach_ID,'_ts1.txt')
raw1_text=readLines(con=input1_file) #read every line
index1_1=grep("END SETUP",raw1_text) #ts1 start of section
index1_2=grep("END SLOPE",raw1_text) #ts1 end of section
print(index1_1)
print(index1_2)
skip=index1_2-index1_1-2
print(skip)
ts1_hr_df= read.delim(input1_file,
header = TRUE, skip = index1_1, nrows= (index1_2-index1_1-2), dec = ".", sep = ',')%>%
rename("PointID"="TgtID")%>%
rename("HR"="RefHt")%>%
filter(PointID!=101)
input2_file=paste0('raw_ts_data/group3/',reach_ID,'_ts2.txt')
raw2_text=readLines(con=input2_file) #read every line
index2_1=grep("END SETUP",raw2_text) #ts2 start of section
index2_2=grep("END SLOPE",raw2_text) #ts2 end of section
print(index2_1)
print(index2_2)
source("~/Documents/GitHub/igea22/ts_scripts/load_3.R", echo=TRUE)
print(index2_2)
source("~/Documents/GitHub/igea22/ts_scripts/load_3.R", echo=TRUE)
print(index1_1)
source("~/Documents/GitHub/igea22/ts_scripts/load_3.R", echo=TRUE)
source("~/Documents/GitHub/igea22/ts_scripts/load_3.R", echo=TRUE)
source("~/Documents/GitHub/igea22/ts_scripts/load_3.R", echo=TRUE)
source("~/Documents/GitHub/igea22/ts_scripts/load_3.R", echo=TRUE)
source("~/Documents/GitHub/igea22/ts_scripts/load_3.R", echo=TRUE)
