library(dplyr)
library(readxl)
library(tidyr)
library(stringr)
setwd('/Users/Oskar/Documents/UMass/IGEA/igea22/')
#group12 raw water data read-in----
WS1_df = read_xlsx('Raw_water_data/12WS.xlsx') #does this df includes G1 and G2 data?
#normalize group12 data----
#select and rename columns
WS1_clean_df=WS1_df%>%
select('Line', 'd(18_16)Mean', 'd(D_H)Mean', 'Ignore', 'Identifier_1', 'Identifier_2')%>%
rename("meanO"="d(18_16)Mean")%>%
rename("meanH"="d(D_H)Mean")%>%
filter(Line >= 323)%>%
filter(Line <= 580)%>%
filter(Ignore == 0)
#create df for normalizing
WS1_norm_df=WS1_clean_df%>%
filter(Identifier_2 == "standard")%>%
mutate(standardO=case_when(Identifier_1 == "Picarro zero 1 6_23_22" | Identifier_1 == "Picarro zero 2 6_23_22" | Identifier_1 == "Picarro zero 3 6_23_22"~.3,
Identifier_1 == "Picarro mid 3 6_23_22" | Identifier_1 == "Picarro mid 2 6_23_22"| Identifier_1 == "Picarro mid 1 6_23_22"~-20.6,
Identifier_1 == "Picarro depl 3 6_23_22" | Identifier_1 == "Picarro depl 2 6_23_22"| Identifier_1 == "Picarro depl 1 6_23_22"~-29.6,))%>%
mutate(standardH=case_when(Identifier_1 == "Picarro zero 1 6_23_22" | Identifier_1 == "Picarro zero 2 6_23_22" | Identifier_1 == "Picarro zero 3 6_23_22"~1.8,
Identifier_1 == "Picarro mid 3 6_23_22" | Identifier_1 == "Picarro mid 2 6_23_22"| Identifier_1 == "Picarro mid 1 6_23_22"~-159,
Identifier_1 == "Picarro depl 3 6_23_22" | Identifier_1 == "Picarro depl 2 6_23_22"| Identifier_1 == "Picarro depl 1 6_23_22"~-235,))
#linear regressions
modelO = lm(formula = standardO ~ meanO, data = WS1_norm_df)
modelH = lm(formula = standardH ~ meanH, data = WS1_norm_df)
#create normalized df----
WS1_final_df=WS1_clean_df%>%
filter(Identifier_2=="sample")%>%
mutate(normO=modelO$coefficients[2]*meanO+modelO$coefficients[1])%>%
mutate(normH=modelH$coefficients[2]*meanH+modelH$coefficients[1])
View(WS1_final_df)
WS1_stand_df=WS1_clean_df%>%
filter(Identifier_2 == "standard")%>%
mutate(standardO=case_when(Identifier_1 == "Picarro zero 1 6_23_22" | Identifier_1 == "Picarro zero 2 6_23_22" | Identifier_1 == "Picarro zero 3 6_23_22"~.3,
Identifier_1 == "Picarro mid 3 6_23_22" | Identifier_1 == "Picarro mid 2 6_23_22"| Identifier_1 == "Picarro mid 1 6_23_22"~-20.6,
Identifier_1 == "Picarro depl 3 6_23_22" | Identifier_1 == "Picarro depl 2 6_23_22"| Identifier_1 == "Picarro depl 1 6_23_22"~-29.6,))%>%
mutate(standardH=case_when(Identifier_1 == "Picarro zero 1 6_23_22" | Identifier_1 == "Picarro zero 2 6_23_22" | Identifier_1 == "Picarro zero 3 6_23_22"~1.8,
Identifier_1 == "Picarro mid 3 6_23_22" | Identifier_1 == "Picarro mid 2 6_23_22"| Identifier_1 == "Picarro mid 1 6_23_22"~-159,
Identifier_1 == "Picarro depl 3 6_23_22" | Identifier_1 == "Picarro depl 2 6_23_22"| Identifier_1 == "Picarro depl 1 6_23_22"~-235,))
#linear regressions
modelO = lm(formula = standardO ~ meanO, data = WS1_stand_df)
modelH = lm(formula = standardH ~ meanH, data = WS1_stand_df)
#create normalized df----
WS1_norm_df=WS1_clean_df%>%
filter(Identifier_2=="sample")%>%
mutate(normO=modelO$coefficients[2]*meanO+modelO$coefficients[1])%>%
mutate(normH=modelH$coefficients[2]*meanH+modelH$coefficients[1])
#create df of averages----
WS1_avg_df=WS1_final_df
WS1_avg_df=WS1_norm_df
View(WS1_final_df)
WS1_df = read_xlsx('Raw_water_data/12WS.xlsx') #does this df includes G1 and G2 data?
#normalize group12 data----
#select and rename columns
WS1_clean_df=WS1_df%>%
select('Line', 'd(18_16)Mean', 'd(D_H)Mean', 'Ignore', 'Identifier_1', 'Identifier_2')%>%
rename("meanO"="d(18_16)Mean")%>%
rename("meanH"="d(D_H)Mean")%>%
filter(Line >= 323)%>%
filter(Line <= 580)%>%
filter(Ignore == 0)
#create df for normalizing
WS1_stand_df=WS1_clean_df%>%
filter(Identifier_2 == "standard")%>%
mutate(standardO=case_when(Identifier_1 == "Picarro zero 1 6_23_22" | Identifier_1 == "Picarro zero 2 6_23_22" | Identifier_1 == "Picarro zero 3 6_23_22"~.3,
Identifier_1 == "Picarro mid 3 6_23_22" | Identifier_1 == "Picarro mid 2 6_23_22"| Identifier_1 == "Picarro mid 1 6_23_22"~-20.6,
Identifier_1 == "Picarro depl 3 6_23_22" | Identifier_1 == "Picarro depl 2 6_23_22"| Identifier_1 == "Picarro depl 1 6_23_22"~-29.6,))%>%
mutate(standardH=case_when(Identifier_1 == "Picarro zero 1 6_23_22" | Identifier_1 == "Picarro zero 2 6_23_22" | Identifier_1 == "Picarro zero 3 6_23_22"~1.8,
Identifier_1 == "Picarro mid 3 6_23_22" | Identifier_1 == "Picarro mid 2 6_23_22"| Identifier_1 == "Picarro mid 1 6_23_22"~-159,
Identifier_1 == "Picarro depl 3 6_23_22" | Identifier_1 == "Picarro depl 2 6_23_22"| Identifier_1 == "Picarro depl 1 6_23_22"~-235,))
#linear regressions
modelO = lm(formula = standardO ~ meanO, data = WS1_stand_df)
modelH = lm(formula = standardH ~ meanH, data = WS1_stand_df)
#create normalized df----
WS1_norm_df=WS1_clean_df%>%
filter(Identifier_2=="sample")%>%
mutate(normO=modelO$coefficients[2]*meanO+modelO$coefficients[1])%>%
mutate(normH=modelH$coefficients[2]*meanH+modelH$coefficients[1])
#create df of averages----
WS1_avg_df=WS1_norm_df
View(WS1_norm_df)
WS1_avg_df=WS1_norm_df%>%
filter(Identifier_1=="E7_P")%>%
avgO = mean(normO)
WS1_avg_df=WS1_norm_df%>%
filter(Identifier_1=="E7_P")%>%
avgO = mean(normO)
View(WS1_norm_df)
WS1_avg_df = WS1_norm_df%>%
filter(Identifier_1=="E7_P")
View(WS1_avg_df)
WS1_avg_df = WS1_norm_df%>%
filter(Identifier_1=="E7_P")%>%
mutate(avgO = mean(normO))
View(WS1_avg_df)
avgO = mean(WS1_norm_df$normO[1,2,3])
avgO = mean(WS1_norm_df$normO[3])
avgO1 = mean(WS1_norm_df$normO)
avgO2 = mean(WS1_norm_df$normO[1:3])
avgO3 = mean(WS1_norm_df$normO[c(Identifier_1=="E7_P")])
WS1_avg_df = WS1_norm_df%>%
group_by(Identifier_1)%>%
summarize(avgO=mean(normO))
WS1_avg_df = WS1_norm_df%>%
group_by(Identifier_1)%>%
summarize(avgO=mean(normO),avgH=mean(normH))
ground_df = read_xlsx('Raw_water_data/NEON_ground.xlsx')
precip_df = read_xlsx('Raw_water_data/NEON_precip.xlsx')
precip_df = read_xlsx('Raw_water_data/NEON_precipitation.xlsx')
View(ground_df)
ground_df = read_xlsx('Raw_water_data/NEON_ground.xlsx',2)
precip_df = read_xlsx('Raw_water_data/NEON_precipitation.xlsx',2)
View(precip_df)
ground_df = read_xlsx('Raw_water_data/NEON_ground.xlsx',sheet=2, skip=1, header=TRUE)
ground_df = read_xlsx('Raw_water_data/NEON_ground.xlsx',sheet=2, skip=1)
View(ground_df)
precip_df = read_xlsx('Raw_water_data/NEON_precipitation.xlsx',sheet=2, skip=1)
View(precip_df)
ground_df = read_xlsx('Raw_water_data/NEON_ground.xlsx',sheet=2, skip=1)%>%
select('Latitude','Longitude','Elevation_mabsl','Sample_ID','Collection_Date','d2H','d18O')
View(ground_df)
precip_df = read_xlsx('Raw_water_data/NEON_precipitation.xlsx',sheet=2, skip=1)%>%
select('Latitude','Longitude','Elevation_mabsl','Sample_ID','Collection_Date','d2H','d18O')
ground_df = read_xlsx('Raw_water_data/NEON_ground.xlsx',sheet=2, skip=1)%>%
select('Latitude','Longitude','Elevation_mabsl','Sample_ID','Collection_Date','d2H','d18O')%>%
mutate(Location = strsplit(Sample_ID, "_")[2]
ground_df = read_xlsx('Raw_water_data/NEON_ground.xlsx',sheet=2, skip=1)%>%
#join averages with NEON data----
ground_df = read_xlsx('Raw_water_data/NEON_ground.xlsx',sheet=2, skip=1)%>%
select('Latitude','Longitude','Elevation_mabsl','Sample_ID','Collection_Date','d2H','d18O')%>%
mutate(Location = strsplit(Sample_ID, "_")[[1]][2])
ground_df = read_xlsx('Raw_water_data/NEON_ground.xlsx',sheet=2, skip=1)%>%
select('Latitude','Longitude','Elevation_mabsl','Sample_ID','Collection_Date','d2H','d18O')%>%
mutate(Location = strsplit(Sample_ID, "_")[[]][2])
ground_df = read_xlsx('Raw_water_data/NEON_ground.xlsx',sheet=2, skip=1)%>%
select('Latitude','Longitude','Elevation_mabsl','Sample_ID','Collection_Date','d2H','d18O')%>%
mutate(Location = strsplit(Sample_ID, "_")[2])
ground_df = read_xlsx('Raw_water_data/NEON_ground.xlsx',sheet=2, skip=1)%>%
select('Latitude','Longitude','Elevation_mabsl','Sample_ID','Collection_Date','d2H','d18O')%>%
mutate(Location = strsplit(Sample_ID, "_")[[1]][2])
ground_df = read_xlsx('Raw_water_data/NEON_ground.xlsx',sheet=2, skip=1)%>%
select('Latitude','Longitude','Elevation_mabsl','Sample_ID','Collection_Date','d2H','d18O')
strsplit(Sample_ID, "_")[[1]][2])
ground_df = read_xlsx('Raw_water_data/NEON_ground.xlsx',sheet=2, skip=1)%>%
select('Latitude','Longitude','Elevation_mabsl','Sample_ID','Collection_Date','d2H','d18O')
strsplit(Sample_ID, "_")[[1]][2]
strsplit(ground_df$Sample_ID, "_")[[1]][2]
strsplit(ground_df$Sample_ID, "_")[[]][2]
strsplit(ground_df$Sample_ID, "_")
strsplit(ground_df$Sample_ID, "_")[2]
